{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"./ExpoLocation","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":42,"index":42}}],"key":"n9eQB3huKj/lRnIsgaXRKPJKjaY=","exportNames":["*"],"imports":1}},{"name":"./LocationEventEmitter","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":43},"end":{"line":2,"column":62,"index":105}}],"key":"38XLRnQdDBx35ZID4eB8duhAnLg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"LocationSubscriber\", {\n    enumerable: true,\n    get: function () {\n      return LocationSubscriber;\n    }\n  });\n  Object.defineProperty(exports, \"HeadingSubscriber\", {\n    enumerable: true,\n    get: function () {\n      return HeadingSubscriber;\n    }\n  });\n  Object.defineProperty(exports, \"LocationErrorSubscriber\", {\n    enumerable: true,\n    get: function () {\n      return LocationErrorSubscriber;\n    }\n  });\n  exports._getCurrentWatchId = _getCurrentWatchId;\n  var _babelRuntimeHelpersClassCallCheck = require(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n  var _classCallCheck = _interopDefault(_babelRuntimeHelpersClassCallCheck);\n  var _babelRuntimeHelpersCreateClass = require(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n  var _createClass = _interopDefault(_babelRuntimeHelpersCreateClass);\n  var _ExpoLocation = require(_dependencyMap[2], \"./ExpoLocation\");\n  var ExpoLocation = _interopDefault(_ExpoLocation);\n  var _LocationEventEmitter = require(_dependencyMap[3], \"./LocationEventEmitter\");\n  var nextWatchId = 0;\n  var Subscriber = /*#__PURE__*/function () {\n    function Subscriber(eventName, eventDataField) {\n      (0, _classCallCheck.default)(this, Subscriber);\n      this.callbacks = {};\n      this.eventSubscription = null;\n      this.eventName = eventName;\n      this.eventDataField = eventDataField;\n    }\n    return (0, _createClass.default)(Subscriber, [{\n      key: \"maybeInitializeSubscription\",\n      value: function maybeInitializeSubscription() {\n        var _this = this;\n        if (this.eventSubscription) {\n          return;\n        }\n        this.eventSubscription = _LocationEventEmitter.LocationEventEmitter.addListener(this.eventName, function (event) {\n          return _this.trigger(event);\n        });\n      }\n      /**\n       * Registers given callback under new id which is then returned.\n       */\n    }, {\n      key: \"registerCallback\",\n      value: function registerCallback(callback) {\n        this.maybeInitializeSubscription();\n        var id = ++nextWatchId;\n        this.callbacks[id] = callback;\n        return id;\n      }\n      /**\n       * Registers given callback under and existing id. This can be used to\n       * create a subscriber for the error event on the same id as the location\n       * event is subscribed to.\n       */\n    }, {\n      key: \"registerCallbackForId\",\n      value: function registerCallbackForId(watchId, callback) {\n        this.maybeInitializeSubscription();\n        var id = watchId;\n        this.callbacks[id] = callback;\n        return id;\n      }\n      /**\n       * Unregisters a callback with given id and revokes the subscription if possible.\n       */\n    }, {\n      key: \"unregisterCallback\",\n      value: function unregisterCallback(id) {\n        // Do nothing if we have already unregistered the callback.\n        if (!this.callbacks[id]) {\n          return;\n        }\n        delete this.callbacks[id];\n        ExpoLocation.default.removeWatchAsync(id);\n        if (Object.keys(this.callbacks).length === 0 && this.eventSubscription) {\n          _LocationEventEmitter.LocationEventEmitter.removeSubscription(this.eventSubscription);\n          this.eventSubscription = null;\n        }\n      }\n    }, {\n      key: \"trigger\",\n      value: function trigger(event) {\n        var watchId = event.watchId;\n        var callback = this.callbacks[watchId];\n        if (callback) {\n          callback(event[this.eventDataField]);\n        } else {\n          ExpoLocation.default.removeWatchAsync(watchId);\n        }\n      }\n    }]);\n  }();\n  var LocationSubscriber = new Subscriber('Expo.locationChanged', 'location');\n  var HeadingSubscriber = new Subscriber('Expo.headingChanged', 'heading');\n  var LocationErrorSubscriber = new Subscriber('Expo.locationError', 'reason');\n  /**\n   * @private Necessary for some unit tests.\n   */\n  function _getCurrentWatchId() {\n    return nextWatchId;\n  }\n});","lineCount":121,"map":[[12,2,65,0,"Object"],[12,8,65,0],[12,9,65,0,"defineProperty"],[12,23,65,0],[12,24,65,0,"exports"],[12,31,65,0],[13,4,65,0,"enumerable"],[13,14,65,0],[14,4,65,0,"get"],[14,7,65,0],[14,18,65,0,"get"],[14,19,65,0],[15,6,65,0],[15,13,65,0,"LocationSubscriber"],[15,31,65,0],[16,4,65,0],[17,2,65,0],[18,2,66,0,"Object"],[18,8,66,0],[18,9,66,0,"defineProperty"],[18,23,66,0],[18,24,66,0,"exports"],[18,31,66,0],[19,4,66,0,"enumerable"],[19,14,66,0],[20,4,66,0,"get"],[20,7,66,0],[20,18,66,0,"get"],[20,19,66,0],[21,6,66,0],[21,13,66,0,"HeadingSubscriber"],[21,30,66,0],[22,4,66,0],[23,2,66,0],[24,2,67,0,"Object"],[24,8,67,0],[24,9,67,0,"defineProperty"],[24,23,67,0],[24,24,67,0,"exports"],[24,31,67,0],[25,4,67,0,"enumerable"],[25,14,67,0],[26,4,67,0,"get"],[26,7,67,0],[26,18,67,0,"get"],[26,19,67,0],[27,6,67,0],[27,13,67,0,"LocationErrorSubscriber"],[27,36,67,0],[28,4,67,0],[29,2,67,0],[30,2,71,0,"exports"],[30,9,71,0],[30,10,71,0,"_getCurrentWatchId"],[30,28,71,0],[30,31,71,0,"_getCurrentWatchId"],[30,49,71,0],[31,2,73,1],[31,6,73,1,"_babelRuntimeHelpersClassCallCheck"],[31,40,73,1],[31,43,73,1,"require"],[31,50,73,1],[31,51,73,1,"_dependencyMap"],[31,65,73,1],[32,2,73,1],[32,6,73,1,"_classCallCheck"],[32,21,73,1],[32,24,73,1,"_interopDefault"],[32,39,73,1],[32,40,73,1,"_babelRuntimeHelpersClassCallCheck"],[32,74,73,1],[33,2,73,1],[33,6,73,1,"_babelRuntimeHelpersCreateClass"],[33,37,73,1],[33,40,73,1,"require"],[33,47,73,1],[33,48,73,1,"_dependencyMap"],[33,62,73,1],[34,2,73,1],[34,6,73,1,"_createClass"],[34,18,73,1],[34,21,73,1,"_interopDefault"],[34,36,73,1],[34,37,73,1,"_babelRuntimeHelpersCreateClass"],[34,68,73,1],[35,2,1,0],[35,6,1,0,"_ExpoLocation"],[35,19,1,0],[35,22,1,0,"require"],[35,29,1,0],[35,30,1,0,"_dependencyMap"],[35,44,1,0],[36,2,1,0],[36,6,1,0,"ExpoLocation"],[36,18,1,0],[36,21,1,0,"_interopDefault"],[36,36,1,0],[36,37,1,0,"_ExpoLocation"],[36,50,1,0],[37,2,2,0],[37,6,2,0,"_LocationEventEmitter"],[37,27,2,0],[37,30,2,0,"require"],[37,37,2,0],[37,38,2,0,"_dependencyMap"],[37,52,2,0],[38,2,3,0],[38,6,3,4,"nextWatchId"],[38,17,3,15],[38,20,3,18],[38,21,3,19],[39,2,3,20],[39,6,4,6,"Subscriber"],[39,16,4,16],[40,4,9,4],[40,13,9,4,"Subscriber"],[40,24,9,16,"eventName"],[40,33,9,25],[40,35,9,27,"eventDataField"],[40,49,9,41],[40,51,9,43],[41,6,9,43],[41,10,9,43,"_classCallCheck"],[41,25,9,43],[41,26,9,43,"default"],[41,33,9,43],[41,41,9,43,"Subscriber"],[41,51,9,43],[42,6,9,43],[42,11,7,4,"callbacks"],[42,20,7,13],[42,23,7,16],[42,24,7,17],[42,25,7,18],[43,6,7,18],[43,11,8,4,"eventSubscription"],[43,28,8,21],[43,31,8,24],[43,35,8,28],[44,6,10,8],[44,10,10,12],[44,11,10,13,"eventName"],[44,20,10,22],[44,23,10,25,"eventName"],[44,32,10,34],[45,6,11,8],[45,10,11,12],[45,11,11,13,"eventDataField"],[45,25,11,27],[45,28,11,30,"eventDataField"],[45,42,11,44],[46,4,12,4],[47,4,12,5],[47,15,12,5,"_createClass"],[47,27,12,5],[47,28,12,5,"default"],[47,35,12,5],[47,37,12,5,"Subscriber"],[47,47,12,5],[48,6,12,5,"key"],[48,9,12,5],[49,6,12,5,"value"],[49,11,12,5],[49,13,13,4],[49,22,13,4,"maybeInitializeSubscription"],[49,49,13,31,"maybeInitializeSubscription"],[49,50,13,31],[49,52,13,34],[50,8,13,34],[50,12,13,34,"_this"],[50,17,13,34],[51,8,14,8],[51,12,14,12],[51,16,14,16],[51,17,14,17,"eventSubscription"],[51,34,14,34],[51,36,14,36],[52,10,15,12],[53,8,16,8],[54,8,17,8],[54,12,17,12],[54,13,17,13,"eventSubscription"],[54,30,17,30],[54,33,17,33,"LocationEventEmitter"],[54,54,17,53],[54,55,17,53,"LocationEventEmitter"],[54,75,17,53],[54,76,17,54,"addListener"],[54,87,17,65],[54,88,17,66],[54,92,17,70],[54,93,17,71,"eventName"],[54,102,17,80],[54,104,17,82],[54,114,17,83,"event"],[54,119,17,88],[55,10,17,88],[55,17,17,93,"_this"],[55,22,17,97],[55,23,17,98,"trigger"],[55,30,17,105],[55,31,17,106,"event"],[55,36,17,111],[55,37,17,112],[56,8,17,112],[56,10,17,113],[57,6,18,4],[58,6,19,4],[59,0,20,0],[60,0,21,0],[61,4,19,4],[62,6,19,4,"key"],[62,9,19,4],[63,6,19,4,"value"],[63,11,19,4],[63,13,22,4],[63,22,22,4,"registerCallback"],[63,38,22,20,"registerCallback"],[63,39,22,21,"callback"],[63,47,22,29],[63,49,22,31],[64,8,23,8],[64,12,23,12],[64,13,23,13,"maybeInitializeSubscription"],[64,40,23,40],[64,41,23,41],[64,42,23,42],[65,8,24,8],[65,12,24,14,"id"],[65,14,24,16],[65,17,24,19],[65,19,24,21,"nextWatchId"],[65,30,24,32],[66,8,25,8],[66,12,25,12],[66,13,25,13,"callbacks"],[66,22,25,22],[66,23,25,23,"id"],[66,25,25,25],[66,26,25,26],[66,29,25,29,"callback"],[66,37,25,37],[67,8,26,8],[67,15,26,15,"id"],[67,17,26,17],[68,6,27,4],[69,6,28,4],[70,0,29,0],[71,0,30,0],[72,0,31,0],[73,0,32,0],[74,4,28,4],[75,6,28,4,"key"],[75,9,28,4],[76,6,28,4,"value"],[76,11,28,4],[76,13,33,4],[76,22,33,4,"registerCallbackForId"],[76,43,33,25,"registerCallbackForId"],[76,44,33,26,"watchId"],[76,51,33,33],[76,53,33,35,"callback"],[76,61,33,43],[76,63,33,45],[77,8,34,8],[77,12,34,12],[77,13,34,13,"maybeInitializeSubscription"],[77,40,34,40],[77,41,34,41],[77,42,34,42],[78,8,35,8],[78,12,35,14,"id"],[78,14,35,16],[78,17,35,19,"watchId"],[78,24,35,26],[79,8,36,8],[79,12,36,12],[79,13,36,13,"callbacks"],[79,22,36,22],[79,23,36,23,"id"],[79,25,36,25],[79,26,36,26],[79,29,36,29,"callback"],[79,37,36,37],[80,8,37,8],[80,15,37,15,"id"],[80,17,37,17],[81,6,38,4],[82,6,39,4],[83,0,40,0],[84,0,41,0],[85,4,39,4],[86,6,39,4,"key"],[86,9,39,4],[87,6,39,4,"value"],[87,11,39,4],[87,13,42,4],[87,22,42,4,"unregisterCallback"],[87,40,42,22,"unregisterCallback"],[87,41,42,23,"id"],[87,43,42,25],[87,45,42,27],[88,8,43,8],[89,8,44,8],[89,12,44,12],[89,13,44,13],[89,17,44,17],[89,18,44,18,"callbacks"],[89,27,44,27],[89,28,44,28,"id"],[89,30,44,30],[89,31,44,31],[89,33,44,33],[90,10,45,12],[91,8,46,8],[92,8,47,8],[92,15,47,15],[92,19,47,19],[92,20,47,20,"callbacks"],[92,29,47,29],[92,30,47,30,"id"],[92,32,47,32],[92,33,47,33],[93,8,48,8,"ExpoLocation"],[93,20,48,20],[93,21,48,20,"default"],[93,28,48,20],[93,29,48,21,"removeWatchAsync"],[93,45,48,37],[93,46,48,38,"id"],[93,48,48,40],[93,49,48,41],[94,8,49,8],[94,12,49,12,"Object"],[94,18,49,18],[94,19,49,19,"keys"],[94,23,49,23],[94,24,49,24],[94,28,49,28],[94,29,49,29,"callbacks"],[94,38,49,38],[94,39,49,39],[94,40,49,40,"length"],[94,46,49,46],[94,51,49,51],[94,52,49,52],[94,56,49,56],[94,60,49,60],[94,61,49,61,"eventSubscription"],[94,78,49,78],[94,80,49,80],[95,10,50,12,"LocationEventEmitter"],[95,31,50,32],[95,32,50,32,"LocationEventEmitter"],[95,52,50,32],[95,53,50,33,"removeSubscription"],[95,71,50,51],[95,72,50,52],[95,76,50,56],[95,77,50,57,"eventSubscription"],[95,94,50,74],[95,95,50,75],[96,10,51,12],[96,14,51,16],[96,15,51,17,"eventSubscription"],[96,32,51,34],[96,35,51,37],[96,39,51,41],[97,8,52,8],[98,6,53,4],[99,4,53,5],[100,6,53,5,"key"],[100,9,53,5],[101,6,53,5,"value"],[101,11,53,5],[101,13,54,4],[101,22,54,4,"trigger"],[101,29,54,11,"trigger"],[101,30,54,12,"event"],[101,35,54,17],[101,37,54,19],[102,8,55,8],[102,12,55,14,"watchId"],[102,19,55,21],[102,22,55,24,"event"],[102,27,55,29],[102,28,55,30,"watchId"],[102,35,55,37],[103,8,56,8],[103,12,56,14,"callback"],[103,20,56,22],[103,23,56,25],[103,27,56,29],[103,28,56,30,"callbacks"],[103,37,56,39],[103,38,56,40,"watchId"],[103,45,56,47],[103,46,56,48],[104,8,57,8],[104,12,57,12,"callback"],[104,20,57,20],[104,22,57,22],[105,10,58,12,"callback"],[105,18,58,20],[105,19,58,21,"event"],[105,24,58,26],[105,25,58,27],[105,29,58,31],[105,30,58,32,"eventDataField"],[105,44,58,46],[105,45,58,47],[105,46,58,48],[106,8,59,8],[106,9,59,9],[106,15,60,13],[107,10,61,12,"ExpoLocation"],[107,22,61,24],[107,23,61,24,"default"],[107,30,61,24],[107,31,61,25,"removeWatchAsync"],[107,47,61,41],[107,48,61,42,"watchId"],[107,55,61,49],[107,56,61,50],[108,8,62,8],[109,6,63,4],[110,4,63,5],[111,2,63,5],[112,2,65,7],[112,6,65,13,"LocationSubscriber"],[112,24,65,31],[112,27,65,34],[112,31,65,38,"Subscriber"],[112,41,65,48],[112,42,65,49],[112,64,65,71],[112,66,65,73],[112,76,65,83],[112,77,65,84],[113,2,66,7],[113,6,66,13,"HeadingSubscriber"],[113,23,66,30],[113,26,66,33],[113,30,66,37,"Subscriber"],[113,40,66,47],[113,41,66,48],[113,62,66,69],[113,64,66,71],[113,73,66,80],[113,74,66,81],[114,2,67,7],[114,6,67,13,"LocationErrorSubscriber"],[114,29,67,36],[114,32,67,39],[114,36,67,43,"Subscriber"],[114,46,67,53],[114,47,67,54],[114,67,67,74],[114,69,67,76],[114,77,67,84],[114,78,67,85],[115,2,68,0],[116,0,69,0],[117,0,70,0],[118,2,71,7],[118,11,71,16,"_getCurrentWatchId"],[118,29,71,34,"_getCurrentWatchId"],[118,30,71,34],[118,32,71,37],[119,4,72,4],[119,11,72,11,"nextWatchId"],[119,22,72,22],[120,2,73,0],[121,0,73,1],[121,3]],"functionMap":{"names":["<global>","Subscriber","Subscriber#constructor","Subscriber#maybeInitializeSubscription","LocationEventEmitter.addListener$argument_1","Subscriber#registerCallback","Subscriber#registerCallbackForId","Subscriber#unregisterCallback","Subscriber#trigger","_getCurrentWatchId"],"mappings":"AAA;ACG;ICK;KDG;IEC;kFCI,8BD;KFC;III;KJK;IKM;KLK;IMI;KNW;IOC;KPS;CDC;OSO;CTE"},"hasCjsExports":false},"type":"js/module"}]}