{"dependencies":[{"name":"expo-notifications","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":52,"index":52}}],"key":"nrBDtkRVez7cBhLzyaRjl+xVfvE=","exportNames":["*"],"imports":1}},{"name":"expo-device","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":53},"end":{"line":2,"column":38,"index":91}}],"key":"bBpmAhO1g++sdeUzQmFVGoQIVwg=","exportNames":["*"],"imports":1}},{"name":"react-native-web/dist/exports/Platform","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"dV3bI3NOD8bfMzaIniMaFGy/nn8=","exportNames":["*"],"imports":1}},{"name":"./api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":133},"end":{"line":4,"column":28,"index":161}}],"key":"FbKPDeRJ9TF3vg1eKYKz12urgic=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopNamespace(e) {\n    if (e && e.__esModule) return e;\n    var n = {};\n    if (e) Object.keys(e).forEach(function (k) {\n      var d = Object.getOwnPropertyDescriptor(e, k);\n      Object.defineProperty(n, k, d.get ? d : {\n        enumerable: true,\n        get: function () {\n          return e[k];\n        }\n      });\n    });\n    n.default = e;\n    return n;\n  }\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"notificationService\", {\n    enumerable: true,\n    get: function () {\n      return notificationService;\n    }\n  });\n  var _expoNotifications = require(_dependencyMap[0], \"expo-notifications\");\n  var Notifications = _interopNamespace(_expoNotifications);\n  var _expoDevice = require(_dependencyMap[1], \"expo-device\");\n  var Device = _interopNamespace(_expoDevice);\n  var _reactNativeWebDistExportsPlatform = require(_dependencyMap[2], \"react-native-web/dist/exports/Platform\");\n  var Platform = _interopDefault(_reactNativeWebDistExportsPlatform);\n  var _api = require(_dependencyMap[3], \"./api\");\n  // Configure how notifications are handled when app is in foreground\n  Notifications.setNotificationHandler({\n    handleNotification: async () => ({\n      shouldShowAlert: true,\n      shouldPlaySound: true,\n      shouldSetBadge: true\n    })\n  });\n  class NotificationService {\n    expoPushToken = null;\n    async registerForPushNotifications() {\n      try {\n        // Check if physical device (notifications don't work on simulator)\n        if (!Device.isDevice) {\n          console.log('Push notifications require a physical device');\n          return null;\n        }\n\n        // Check existing permissions\n        const {\n          status: existingStatus\n        } = await Notifications.getPermissionsAsync();\n        let finalStatus = existingStatus;\n\n        // Request permission if not granted\n        if (existingStatus !== 'granted') {\n          const {\n            status\n          } = await Notifications.requestPermissionsAsync();\n          finalStatus = status;\n        }\n        if (finalStatus !== 'granted') {\n          console.log('Push notification permission denied');\n          return null;\n        }\n\n        // Get Expo push token\n        const tokenData = await Notifications.getExpoPushTokenAsync({\n          projectId: 'your-project-id' // Will be auto-detected in EAS builds\n        });\n        this.expoPushToken = tokenData.data;\n        console.log('Expo Push Token:', this.expoPushToken);\n\n        // Configure Android channel\n        if (Platform.default.OS === 'android') {\n          await Notifications.setNotificationChannelAsync('default', {\n            name: 'Default',\n            importance: Notifications.AndroidImportance.MAX,\n            vibrationPattern: [0, 250, 250, 250],\n            lightColor: '#e74c3c'\n          });\n\n          // Create separate channels for different notification types\n          await Notifications.setNotificationChannelAsync('orders', {\n            name: 'Orders',\n            description: 'Order status updates',\n            importance: Notifications.AndroidImportance.HIGH,\n            sound: 'default'\n          });\n          await Notifications.setNotificationChannelAsync('bids', {\n            name: 'Bids',\n            description: 'Bid request updates',\n            importance: Notifications.AndroidImportance.HIGH,\n            sound: 'default'\n          });\n          await Notifications.setNotificationChannelAsync('offers', {\n            name: 'Offers',\n            description: 'New offers and price updates',\n            importance: Notifications.AndroidImportance.DEFAULT,\n            sound: 'default'\n          });\n        }\n        return this.expoPushToken;\n      } catch (error) {\n        console.error('Error registering for push notifications:', error);\n        return null;\n      }\n    }\n    async savePushToken(isAdmin = false) {\n      if (!this.expoPushToken) {\n        await this.registerForPushNotifications();\n      }\n      if (this.expoPushToken) {\n        try {\n          await _api.api.savePushToken(this.expoPushToken, isAdmin);\n          console.log('Push token saved to server');\n        } catch (error) {\n          console.error('Error saving push token:', error);\n        }\n      }\n    }\n    getToken() {\n      return this.expoPushToken;\n    }\n\n    // Add notification listeners\n    addNotificationReceivedListener(callback) {\n      return Notifications.addNotificationReceivedListener(callback);\n    }\n    addNotificationResponseReceivedListener(callback) {\n      return Notifications.addNotificationResponseReceivedListener(callback);\n    }\n\n    // Get last notification response (for when app opens from notification)\n    async getLastNotificationResponse() {\n      return await Notifications.getLastNotificationResponseAsync();\n    }\n\n    // Schedule a local notification (for testing)\n    async scheduleLocalNotification(title, body, data) {\n      await Notifications.scheduleNotificationAsync({\n        content: {\n          title,\n          body,\n          data,\n          sound: 'default'\n        },\n        trigger: null // Immediately\n      });\n    }\n\n    // Clear all notifications\n    async clearAllNotifications() {\n      await Notifications.dismissAllNotificationsAsync();\n    }\n\n    // Set badge count\n    async setBadgeCount(count) {\n      await Notifications.setBadgeCountAsync(count);\n    }\n  }\n  const notificationService = new NotificationService();\n});","lineCount":172,"map":[[27,2,153,0,"Object"],[27,8,153,0],[27,9,153,0,"defineProperty"],[27,23,153,0],[27,24,153,0,"exports"],[27,31,153,0],[28,4,153,0,"enumerable"],[28,14,153,0],[29,4,153,0,"get"],[29,7,153,0],[29,18,153,0,"get"],[29,19,153,0],[30,6,153,0],[30,13,153,0,"notificationService"],[30,32,153,0],[31,4,153,0],[32,2,153,0],[33,2,1,0],[33,6,1,0,"_expoNotifications"],[33,24,1,0],[33,27,1,0,"require"],[33,34,1,0],[33,35,1,0,"_dependencyMap"],[33,49,1,0],[34,2,1,0],[34,6,1,0,"Notifications"],[34,19,1,0],[34,22,1,0,"_interopNamespace"],[34,39,1,0],[34,40,1,0,"_expoNotifications"],[34,58,1,0],[35,2,2,0],[35,6,2,0,"_expoDevice"],[35,17,2,0],[35,20,2,0,"require"],[35,27,2,0],[35,28,2,0,"_dependencyMap"],[35,42,2,0],[36,2,2,0],[36,6,2,0,"Device"],[36,12,2,0],[36,15,2,0,"_interopNamespace"],[36,32,2,0],[36,33,2,0,"_expoDevice"],[36,44,2,0],[37,2,2,38],[37,6,2,38,"_reactNativeWebDistExportsPlatform"],[37,40,2,38],[37,43,2,38,"require"],[37,50,2,38],[37,51,2,38,"_dependencyMap"],[37,65,2,38],[38,2,2,38],[38,6,2,38,"Platform"],[38,14,2,38],[38,17,2,38,"_interopDefault"],[38,32,2,38],[38,33,2,38,"_reactNativeWebDistExportsPlatform"],[38,67,2,38],[39,2,4,0],[39,6,4,0,"_api"],[39,10,4,0],[39,13,4,0,"require"],[39,20,4,0],[39,21,4,0,"_dependencyMap"],[39,35,4,0],[40,2,6,0],[41,2,7,0,"Notifications"],[41,15,7,13],[41,16,7,14,"setNotificationHandler"],[41,38,7,36],[41,39,7,37],[42,4,8,2,"handleNotification"],[42,22,8,20],[42,24,8,22],[42,30,8,22,"handleNotification"],[42,31,8,22],[42,37,8,35],[43,6,9,4,"shouldShowAlert"],[43,21,9,19],[43,23,9,21],[43,27,9,25],[44,6,10,4,"shouldPlaySound"],[44,21,10,19],[44,23,10,21],[44,27,10,25],[45,6,11,4,"shouldSetBadge"],[45,20,11,18],[45,22,11,20],[46,4,12,2],[46,5,12,3],[47,2,13,0],[47,3,13,1],[47,4,13,2],[48,2,15,0],[48,8,15,6,"NotificationService"],[48,27,15,25],[48,28,15,26],[49,4,16,10,"expoPushToken"],[49,17,16,23],[49,20,16,41],[49,24,16,45],[50,4,18,2],[50,10,18,8,"registerForPushNotifications"],[50,38,18,36,"registerForPushNotifications"],[50,39,18,36],[50,41,18,63],[51,6,19,4],[51,10,19,8],[52,8,20,6],[53,8,21,6],[53,12,21,10],[53,13,21,11,"Device"],[53,19,21,17],[53,20,21,18,"isDevice"],[53,28,21,26],[53,30,21,28],[54,10,22,8,"console"],[54,17,22,15],[54,18,22,16,"log"],[54,21,22,19],[54,22,22,20],[54,68,22,66],[54,69,22,67],[55,10,23,8],[55,17,23,15],[55,21,23,19],[56,8,24,6],[58,8,26,6],[59,8,27,6],[59,14,27,12],[60,10,27,14,"status"],[60,16,27,20],[60,18,27,22,"existingStatus"],[61,8,27,37],[61,9,27,38],[61,12,27,41],[61,18,27,47,"Notifications"],[61,31,27,60],[61,32,27,61,"getPermissionsAsync"],[61,51,27,80],[61,52,27,81],[61,53,27,82],[62,8,28,6],[62,12,28,10,"finalStatus"],[62,23,28,21],[62,26,28,24,"existingStatus"],[62,40,28,38],[64,8,30,6],[65,8,31,6],[65,12,31,10,"existingStatus"],[65,26,31,24],[65,31,31,29],[65,40,31,38],[65,42,31,40],[66,10,32,8],[66,16,32,14],[67,12,32,16,"status"],[68,10,32,23],[68,11,32,24],[68,14,32,27],[68,20,32,33,"Notifications"],[68,33,32,46],[68,34,32,47,"requestPermissionsAsync"],[68,57,32,70],[68,58,32,71],[68,59,32,72],[69,10,33,8,"finalStatus"],[69,21,33,19],[69,24,33,22,"status"],[69,30,33,28],[70,8,34,6],[71,8,36,6],[71,12,36,10,"finalStatus"],[71,23,36,21],[71,28,36,26],[71,37,36,35],[71,39,36,37],[72,10,37,8,"console"],[72,17,37,15],[72,18,37,16,"log"],[72,21,37,19],[72,22,37,20],[72,59,37,57],[72,60,37,58],[73,10,38,8],[73,17,38,15],[73,21,38,19],[74,8,39,6],[76,8,41,6],[77,8,42,6],[77,14,42,12,"tokenData"],[77,23,42,21],[77,26,42,24],[77,32,42,30,"Notifications"],[77,45,42,43],[77,46,42,44,"getExpoPushTokenAsync"],[77,67,42,65],[77,68,42,66],[78,10,43,8,"projectId"],[78,19,43,17],[78,21,43,19],[78,38,43,36],[78,39,43,38],[79,8,44,6],[79,9,44,7],[79,10,44,8],[80,8,46,6],[80,12,46,10],[80,13,46,11,"expoPushToken"],[80,26,46,24],[80,29,46,27,"tokenData"],[80,38,46,36],[80,39,46,37,"data"],[80,43,46,41],[81,8,47,6,"console"],[81,15,47,13],[81,16,47,14,"log"],[81,19,47,17],[81,20,47,18],[81,38,47,36],[81,40,47,38],[81,44,47,42],[81,45,47,43,"expoPushToken"],[81,58,47,56],[81,59,47,57],[83,8,49,6],[84,8,50,6],[84,12,50,10,"Platform"],[84,20,50,18],[84,21,50,18,"default"],[84,28,50,18],[84,29,50,19,"OS"],[84,31,50,21],[84,36,50,26],[84,45,50,35],[84,47,50,37],[85,10,51,8],[85,16,51,14,"Notifications"],[85,29,51,27],[85,30,51,28,"setNotificationChannelAsync"],[85,57,51,55],[85,58,51,56],[85,67,51,65],[85,69,51,67],[86,12,52,10,"name"],[86,16,52,14],[86,18,52,16],[86,27,52,25],[87,12,53,10,"importance"],[87,22,53,20],[87,24,53,22,"Notifications"],[87,37,53,35],[87,38,53,36,"AndroidImportance"],[87,55,53,53],[87,56,53,54,"MAX"],[87,59,53,57],[88,12,54,10,"vibrationPattern"],[88,28,54,26],[88,30,54,28],[88,31,54,29],[88,32,54,30],[88,34,54,32],[88,37,54,35],[88,39,54,37],[88,42,54,40],[88,44,54,42],[88,47,54,45],[88,48,54,46],[89,12,55,10,"lightColor"],[89,22,55,20],[89,24,55,22],[90,10,56,8],[90,11,56,9],[90,12,56,10],[92,10,58,8],[93,10,59,8],[93,16,59,14,"Notifications"],[93,29,59,27],[93,30,59,28,"setNotificationChannelAsync"],[93,57,59,55],[93,58,59,56],[93,66,59,64],[93,68,59,66],[94,12,60,10,"name"],[94,16,60,14],[94,18,60,16],[94,26,60,24],[95,12,61,10,"description"],[95,23,61,21],[95,25,61,23],[95,47,61,45],[96,12,62,10,"importance"],[96,22,62,20],[96,24,62,22,"Notifications"],[96,37,62,35],[96,38,62,36,"AndroidImportance"],[96,55,62,53],[96,56,62,54,"HIGH"],[96,60,62,58],[97,12,63,10,"sound"],[97,17,63,15],[97,19,63,17],[98,10,64,8],[98,11,64,9],[98,12,64,10],[99,10,66,8],[99,16,66,14,"Notifications"],[99,29,66,27],[99,30,66,28,"setNotificationChannelAsync"],[99,57,66,55],[99,58,66,56],[99,64,66,62],[99,66,66,64],[100,12,67,10,"name"],[100,16,67,14],[100,18,67,16],[100,24,67,22],[101,12,68,10,"description"],[101,23,68,21],[101,25,68,23],[101,46,68,44],[102,12,69,10,"importance"],[102,22,69,20],[102,24,69,22,"Notifications"],[102,37,69,35],[102,38,69,36,"AndroidImportance"],[102,55,69,53],[102,56,69,54,"HIGH"],[102,60,69,58],[103,12,70,10,"sound"],[103,17,70,15],[103,19,70,17],[104,10,71,8],[104,11,71,9],[104,12,71,10],[105,10,73,8],[105,16,73,14,"Notifications"],[105,29,73,27],[105,30,73,28,"setNotificationChannelAsync"],[105,57,73,55],[105,58,73,56],[105,66,73,64],[105,68,73,66],[106,12,74,10,"name"],[106,16,74,14],[106,18,74,16],[106,26,74,24],[107,12,75,10,"description"],[107,23,75,21],[107,25,75,23],[107,55,75,53],[108,12,76,10,"importance"],[108,22,76,20],[108,24,76,22,"Notifications"],[108,37,76,35],[108,38,76,36,"AndroidImportance"],[108,55,76,53],[108,56,76,54,"DEFAULT"],[108,63,76,61],[109,12,77,10,"sound"],[109,17,77,15],[109,19,77,17],[110,10,78,8],[110,11,78,9],[110,12,78,10],[111,8,79,6],[112,8,81,6],[112,15,81,13],[112,19,81,17],[112,20,81,18,"expoPushToken"],[112,33,81,31],[113,6,82,4],[113,7,82,5],[113,8,82,6],[113,15,82,13,"error"],[113,20,82,18],[113,22,82,20],[114,8,83,6,"console"],[114,15,83,13],[114,16,83,14,"error"],[114,21,83,19],[114,22,83,20],[114,65,83,63],[114,67,83,65,"error"],[114,72,83,70],[114,73,83,71],[115,8,84,6],[115,15,84,13],[115,19,84,17],[116,6,85,4],[117,4,86,2],[118,4,88,2],[118,10,88,8,"savePushToken"],[118,23,88,21,"savePushToken"],[118,24,88,22,"isAdmin"],[118,31,88,38],[118,34,88,41],[118,39,88,46],[118,41,88,63],[119,6,89,4],[119,10,89,8],[119,11,89,9],[119,15,89,13],[119,16,89,14,"expoPushToken"],[119,29,89,27],[119,31,89,29],[120,8,90,6],[120,14,90,12],[120,18,90,16],[120,19,90,17,"registerForPushNotifications"],[120,47,90,45],[120,48,90,46],[120,49,90,47],[121,6,91,4],[122,6,93,4],[122,10,93,8],[122,14,93,12],[122,15,93,13,"expoPushToken"],[122,28,93,26],[122,30,93,28],[123,8,94,6],[123,12,94,10],[124,10,95,8],[124,16,95,14,"api"],[124,20,95,17],[124,21,95,17,"api"],[124,24,95,17],[124,25,95,18,"savePushToken"],[124,38,95,31],[124,39,95,32],[124,43,95,36],[124,44,95,37,"expoPushToken"],[124,57,95,50],[124,59,95,52,"isAdmin"],[124,66,95,59],[124,67,95,60],[125,10,96,8,"console"],[125,17,96,15],[125,18,96,16,"log"],[125,21,96,19],[125,22,96,20],[125,50,96,48],[125,51,96,49],[126,8,97,6],[126,9,97,7],[126,10,97,8],[126,17,97,15,"error"],[126,22,97,20],[126,24,97,22],[127,10,98,8,"console"],[127,17,98,15],[127,18,98,16,"error"],[127,23,98,21],[127,24,98,22],[127,50,98,48],[127,52,98,50,"error"],[127,57,98,55],[127,58,98,56],[128,8,99,6],[129,6,100,4],[130,4,101,2],[131,4,103,2,"getToken"],[131,12,103,10,"getToken"],[131,13,103,10],[131,15,103,28],[132,6,104,4],[132,13,104,11],[132,17,104,15],[132,18,104,16,"expoPushToken"],[132,31,104,29],[133,4,105,2],[135,4,107,2],[136,4,108,2,"addNotificationReceivedListener"],[136,35,108,33,"addNotificationReceivedListener"],[136,36,109,4,"callback"],[136,44,109,64],[136,46,110,4],[137,6,111,4],[137,13,111,11,"Notifications"],[137,26,111,24],[137,27,111,25,"addNotificationReceivedListener"],[137,58,111,56],[137,59,111,57,"callback"],[137,67,111,65],[137,68,111,66],[138,4,112,2],[139,4,114,2,"addNotificationResponseReceivedListener"],[139,43,114,41,"addNotificationResponseReceivedListener"],[139,44,115,4,"callback"],[139,52,115,68],[139,54,116,4],[140,6,117,4],[140,13,117,11,"Notifications"],[140,26,117,24],[140,27,117,25,"addNotificationResponseReceivedListener"],[140,66,117,64],[140,67,117,65,"callback"],[140,75,117,73],[140,76,117,74],[141,4,118,2],[143,4,120,2],[144,4,121,2],[144,10,121,8,"getLastNotificationResponse"],[144,37,121,35,"getLastNotificationResponse"],[144,38,121,35],[144,40,121,38],[145,6,122,4],[145,13,122,11],[145,19,122,17,"Notifications"],[145,32,122,30],[145,33,122,31,"getLastNotificationResponseAsync"],[145,65,122,63],[145,66,122,64],[145,67,122,65],[146,4,123,2],[148,4,125,2],[149,4,126,2],[149,10,126,8,"scheduleLocalNotification"],[149,35,126,33,"scheduleLocalNotification"],[149,36,127,4,"title"],[149,41,127,17],[149,43,128,4,"body"],[149,47,128,16],[149,49,129,4,"data"],[149,53,129,30],[149,55,130,4],[150,6,131,4],[150,12,131,10,"Notifications"],[150,25,131,23],[150,26,131,24,"scheduleNotificationAsync"],[150,51,131,49],[150,52,131,50],[151,8,132,6,"content"],[151,15,132,13],[151,17,132,15],[152,10,133,8,"title"],[152,15,133,13],[153,10,134,8,"body"],[153,14,134,12],[154,10,135,8,"data"],[154,14,135,12],[155,10,136,8,"sound"],[155,15,136,13],[155,17,136,15],[156,8,137,6],[156,9,137,7],[157,8,138,6,"trigger"],[157,15,138,13],[157,17,138,15],[157,21,138,19],[157,22,138,21],[158,6,139,4],[158,7,139,5],[158,8,139,6],[159,4,140,2],[161,4,142,2],[162,4,143,2],[162,10,143,8,"clearAllNotifications"],[162,31,143,29,"clearAllNotifications"],[162,32,143,29],[162,34,143,32],[163,6,144,4],[163,12,144,10,"Notifications"],[163,25,144,23],[163,26,144,24,"dismissAllNotificationsAsync"],[163,54,144,52],[163,55,144,53],[163,56,144,54],[164,4,145,2],[166,4,147,2],[167,4,148,2],[167,10,148,8,"setBadgeCount"],[167,23,148,21,"setBadgeCount"],[167,24,148,22,"count"],[167,29,148,35],[167,31,148,37],[168,6,149,4],[168,12,149,10,"Notifications"],[168,25,149,23],[168,26,149,24,"setBadgeCountAsync"],[168,44,149,42],[168,45,149,43,"count"],[168,50,149,48],[168,51,149,49],[169,4,150,2],[170,2,151,0],[171,2,153,7],[171,8,153,13,"notificationService"],[171,27,153,32],[171,30,153,35],[171,34,153,39,"NotificationService"],[171,53,153,58],[171,54,153,59],[171,55,153,60],[172,0,153,61],[172,3]],"functionMap":{"names":["<global>","Notifications.setNotificationHandler$argument_0.handleNotification","NotificationService","NotificationService#registerForPushNotifications","NotificationService#savePushToken","NotificationService#getToken","NotificationService#addNotificationReceivedListener","NotificationService#addNotificationResponseReceivedListener","NotificationService#getLastNotificationResponse","NotificationService#scheduleLocalNotification","NotificationService#clearAllNotifications","NotificationService#setBadgeCount"],"mappings":"AAA;sBCO;IDI;AEG;ECG;GDoE;EEE;GFa;EGE;GHE;EIG;GJI;EKE;GLI;EMG;GNE;EOG;GPc;EQG;GRE;ESG;GTE;CFC"},"hasCjsExports":false},"type":"js/module"}]}